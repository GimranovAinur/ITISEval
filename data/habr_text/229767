'229767 |@words хотеть поделиться простой:2 рецепт как:9 можно:9 эффективно выполнять:3 большой:3 число:6 http-запрос:2 другой:5 задача:16 ввод-вывод:3 обычный:2 питон:4 самый:6 правильный:2 что:19 быть:14 сделать:2 использовать:10 асинхронный:2 фреймворка вроде торнадо или:7 gevent иногда этот:9 вариант:6 подходить:2 потому:3 встроить event loop уже:7 существующий проект проблематично мыть случай:2 существовать django-приложение который:12 примерно раз:7 месяц нужно:8 выгрузить немного:3 очень:5 мелкий файл:6 aws идти:3 время:8 количество:7 стать:6 приближаться:4 тысяча:7 выгружать очередь:5 утомительный известно поддерживать множественный обновление:3 один:13 put-запрос:2 установленный опытный путём максимальный скорость запрос:8 сервер:2 ec2 тот:6 датацентр превышать секунда:2 мало кстати такой:5 образ для:11 час питонистый детство знать использование поток:25 тред:2 операционный система нет:3 никакой толк из-за глобальный:2 лока:2 интерпретатор:2 немногий догадываться люба лок:5 освобождаться частность это:9 происходить при:3 операция сетевой значит распараллеливание пока:3 ожидать:2 ответ:2 спокойно:2 обрабатывать результат предыдущий:2 готовить следующий:3 получаться:3 всего-то нужный:2 пул:2 счастие написать начинать:2 версия:3 унификация весь:15 работа:3 появиться:2 библиотека:2 concurrent:4 futures:5 два:4 есть:7 бекпорт под имя код:5 безобразие from:4 import:4 threadpoolexecutor:6 with:4 concurrency:7 executor:9 for:6 map:3 upload:10 queryset:10 pass:2 здесь:2 рабочий функция:4 сам:2 итератор:5 объект:9 передаваться 150 смочь пропихнуть амазона:2 ≈450 тут:5 необходимый замечание относительно они:3 должный:4 потокобезопасный:2 несколько паралельный выполняться иметь общий ресурс либо правильно управлять плохой помощник гарантировать выполнение:6 прерваться неподходящий место если:4 пользоваться только:4 urllib3 requests boto волноваться чем:2 про уточнять также потоконебезопасный мочь:4 оказаться:2 ваш собственный 200:5 думать сколько:4 память:5 занимать django-модель:2 фьючерс:4 поставить:2 вместе около:3 гигабайт понятно посылать экзекутор:4 сразу:4 выход почему добавлять:2 новое:3 окончание:3 начало равный вести учёт выполнить:2 хранить наружу:2 отдавать:3 классный повторно осторожно окончательный future:13 def:9 task:10 queue:6 iterator:16 concurrency=10:2 submit:9 try:4 obj:7 next:2 except:4 stopiteration:2 return:5 stats:16 'delayed:8 add:4 done:12 callback:4 'done:4 range:2 она всего:3 три действие выбирать:2 создавать он:8 вызываться ставить цикл ставиться пробовать запустить concurrency=5:2 while:3 true:2 print:2 rdone:2 work:2 delayed:2 format:2 sys:2 stdout:2 flush:2 break time sleep отлично работать:7 использоваться метод:2 кверисет кажется:2 первое пример делать:4 бесполезный действительно:3 выбираться:2 каждый:4 правда проблема:6 стоить:2 увеличить:2 кол-в:4 сыпаться исключение:3 valueerror generator already executing генератор поэтому:5 рано:3 поздно:3 пытаться выбрать значение:2 одновременно:3 дело:2 произойти:2 когда:4 меньший вероятность:2 касаться счётчик процесс считать потом оба:2 прибавить единица записать исходный:2 разделять:2 обернуть обработка ошибка:2 прервать помощь:2 ctrl+c:2 основное выбросить остальной:4 продолжить конец механизм принудительный завершение:2 shutdown:2 цель чтобы останавливать:2 пользователь нажимать хороший создать резолвиться подчищать кто-то извне отменить вот:2 учесть fail=lambda none result:14 cancelled lock:4 exception:2 fail set cleanup:2 wait=false threading:2 rlock reentrant:2 определённый короткий успеть выполниться навешивание обработчик:2 тогда:2 немедленно попытаться ещё:4 захватить:3 получиться дедлка позволить зайти дать:5 себя освободить столько захватывать меняться:2 timeouterror:2 not keyboardinterrupt cancel raise тупо засыпать:2 миллисекунда умный прерывание смеркаться 1,5 миллион:3 несмотря выглядеть так:3 будто фиксировать:2 потребление:3 протяжение равно:2 рослый ожидаться:2 создаваться:2 явно сырой база:4 выгребаться драйвер 500 мегабайт строка решение:3 довольно:2 очевидно порция следовать:2 избегать выборка:3 смещение:2 вид limit 100 offset 200000 означать субд пробежаться 200100 запись вместо поль индекс real:3 pk='pk chunk:8 size=5000 order list:2 size:2 item:4 yield:2 last:2 getattr filter скорее pagination key нежели primary:2 впрочем зачастую хорошо:2 роль расходовать медленный возникать:2 джанга:2 соединение:6 являться локальный очередной доходить критический подобный operationalerror fatal remaining connection:3 slots are reserved non-replication superuser connections:6 ограничить возможность разный стандартный средство хака заменить local django default:2 alias:3 type 'empty object allow thread sharing надо:2 понимать убъть потокобезопасность приложение:2 годиться команда запускать:2 консоль более гуманный закрывать после:2 элемент давать сильно оверхэда close:3 db=default concurrency=150 третье отдельный:2 общаться ничто ломать привносить накладный расход постоянный переоткрытие реализация сложный тянуть маленький статья возможно пройти возрасти основный занять восемь часы текущий цена некоторый тезис прочитать позаботиться изоляция десятка сотня аккуратно следить джанговский orm совсем хелперы гитхаб https gist github com homm b8caf60c11997da69b1e