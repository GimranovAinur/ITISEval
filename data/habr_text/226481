'226481 |@words вводный субд:2 postgresql:12 есть:4 такой:4 интересный технический решение:3 перед:3 тем:2 как:15 собственно начать что:17 менять:4 файл:18 самый:3 база:6 дать:12 писать:3 уже:3 перевести внутренний формат:2 команда:10 специальный журнал:3 write-ahead log:5 после:10 успешный завершение транзакция:5 делать:6 это:11 пометка сделать:4 быть:11 для:11 восстановление:4 сбой итог пытливый разработчик:2 дойти идея:2 использовать:2 этот:6 резервирование репликация принцип:2 логично весь:8 ход немой:3 записать более:2 тот:3 можно:7 просто:6 восстановить:2 бэкап:5 состояние определённый момент:3 время:2 прервать проигрывание:4 запись:23 wal-лог:3 нужный:3 однако давать рассмотреть сценарий допустить понедельник:2 базовый:4 запустить:2 архивация:2 wal-логово:6 среда:2 выполнить запрос:5 удаление:7 ошибочный:3 маска:2 обнаружить только:4 пятница:3 когда:2 менеджер:2 сообщить исчезновение какой:6 он:2 ситуация:2 мочь:4 восстановиться потерять работа четверг возникать логичный вопрос:2 нельзя при:2 исключить наш обычный ограничиться форум я:3 дистрибутив freebsd:2 тарболл исходник:5 разный версия:2 10гб место:8 винт gcc два:3 относительно незагруженный неделя также текила ром ящик пиво обрывочный воспоминание синтаксис язык чтобы:5 необходимый запас раз:2 заглянуть исходный код:5 сложно остановиться итак эксперимент взять:2 порт:6 клиент соответствующий:2 поставить:2 помощь:3 pkg ничто:3 нужно заранее извиняться возможный капитанство текст:2 писаться новичок так:3 быстро освежить голов случай:5 необходимость поэтому:4 расписать подробно установка настройка:2 сервераroot leninzhiv:28 usr:28 ports:4 databases:4 postgresql92-server:4 root:15 make:9 fetch extract:2 скачать разворачиваться папка:12 work:9 директория:9 честно говорить понять:3 пересобирать:2 изменение:8 rebuild вроде:2 нету clean свой:3 очередь сносить:2 скопировать:3 домашний:3 вносить:4 там:4 затем копировать:4 запускать:3 install:3 пока ставить постгрес:4 создавать архив:2 mkdir:2 archive:15 wal:15 data:17 chown pgsql:22 wheel требовать доступ юзер поэома право:2 chmod 0700 примитивный здесь иметь:4 смысл:3 перейти под:2 постгресовый учеткать маленький возня initdb local:13 раскомментировать:3 править:2 параметр:3 conf:5 mode=on level command:2 'test пример:2 ряд:3 каммент max senders hba строка:5 replication trust стартовать серверpgsql:2 etc:5 start:2 бэкапpgsql basebackup проверять:3 должный:3 лежать:2 копия вид:2 примерно:2 000000010000000000000003 конфига восстановленияcp share recovery:4 sample раскомменитровать тоже:2 коммент restore 'cp psql:2 postgres:2 postgres=:16 create table serial text:13 character insert:13 into:11 values:11 'karlin 'petrov 'ivanov 'kaplan 'karas 'bukova 'sidorova 'karman 'nikolaev удалять:4 delete:5 from:5 where:3 ilike 'ka изменять новое:2 дискотекаpostgres= update:5 set:2 text='petrova text='sidorova 'kruglov text='alexeeva text='bukova 'kvadrat обнаруживать очень хорошеть вместе карлин удалить каплан карась карман останавливать stop:3 exit начинать думать идти:6 помнить:2 она:4 переходить туда если:7 кто подсказать нормальный пересобираться внести крайне:2 благодарный вначале:2 себя цель:2 найти:6 где:2 считываться относиться поиск:3 содержимое:4 postgresql-9 src здравый оказаться xlog:5 уметь трассировка программа начало каждый функция:6 добавить:2 название собрать получиться:2 вот:3 результат:2 bool:20 check:2 buffers:2 int:15 newval:2 void:23 extra:3 gucsource:2 source:2 assign sync:2 method:2 new:2 size:2 xlogshmemsize:2 static:19 xlogchoosenumbuffers xlogshmeminit readcontrolfile:2 startupxlog:3 char:2 str time:2 tnow validatexlogdirectorystructure readrecoverycommandfile list readtimelinehistory timelineid targettli read backup label xlogrecptr:10 checkpointloc backupendrequired backupfromstandby xlogrecord:12 readcheckpointrecord recptr:8 whichchkpt readrecord:7 emode:8 fetching:6 ckpt:6 xlogpageread:4 randaccess:3 xlogfilereadanytli uint32:5 seg sources recordisvalid:2 record:12 recoverystopshere:2 includethis checkrecoveryconsistency:2 общий:2 сложиться впечатление основный действие происходить цикл близкий:2 знакомтсвый функица показать возвращать:2 return:4 buffer:4 вышеуказанный нехитрый способ:2 уточнять процесс возврат через прекрасно структура тип:2 посмотреть достаточно лаконичный typedef struct:2 crc32:10 crc:3 for:3 this:2 prev:9 ptr previous transactionid xid:10 xact:3 tot:2 len:13 total:2 entire rmgr uint8 info:2 flag bits see below rmgrid rmid:6 resource manager actual follows end отлично мы:2 длина вывод:3 добавлять file pf2:4 fopen log3:2 txt:2 buf:11 poi:2 i=0 record-:8 i++ fputc poi++ fprintf xid= fclose старый:2 собирать:2 устаналивать новый:2 deinstall напоминать теперь wal-файл сам подтянуться select:4 смотреть много больший видимо:2 создание служебный таблица:4 конец видеть:3 gnikolaev 3682278083 xid=1002:2 т›щќ 3423214679 2698322546 xid=1003:6 841341184 3881244668 4028315482 µєјђ єщќ 2426645173 уњ-b gpetrova 1110285523 xid=1004 между знакомый:2 фамилия николаев петров похожий один:4 непохожий номер:3 значит:2 записываться стереть 64822 ожидаться дописывать проверка:2 который:5 значение:2 вместо null опять:2 устанавливать удалённый:2 правда:2 произойти:2 наскок понятно ведь проходить целостность всего быстрый использование:2 привести тут:2 отчётливо сей путём потому почти сразу:3 два-три появление вызов они шикарный:2 диагностический:2 кусок:5 второе комментарий now apply the itself проигрыш rmgrtable:4 redo:11 endrecptr:4 изменить xid==1003 else победа ориентироваться:2 местность несомненно хорошо задача:2 решить ограниченный набор лог:2 рабочий:2 вернуться:2 упомянуть ifdef debug:3 trace:2 messages:2 debug2 debug3 stringinfodata initstringinfo appendstringinfo:2 lsn:9 readrecptr:2 xlogid:2 xrecoff:2 outrec desc:2 xlogrecgetdata elog pfree endif включить define config manual debug=on привычка направить отдельный выводить описание:2 являться массив выглядеть оно 3015500:2 3015578:3 30154d0 1002:2 heap:6 rel:7 1663:6 12318:6 16386:6 tid:6 30155a8:3 transaction:2 commit:2 2014-06-06:2 08_38_27:2 537874+00 30155e0:3 1003:6 3015618:3 3015650:3 3015688:3 30156b8:2 54153+00 3015738 1004 hot увидеть четыре подтверждение идентификатор oid:6 пространство имя циферка получить spcname catalog:3 tablespace datname database внезапно relname class ориентир отметка объяснять надо знать crime commited соответсвовать альтернативный просмотр кракозябра обрывок передать делаться незадолго или искомое использоваться:3 встречаться напоследок отметить контрибах появиться утилит xlogdump нацелить предоставление человекочитать заинтересовать фичахнуть вполне возможно метод подводный камень например отработать update-ы пропустить часть частый вакуумирование любой хороший хоть надежда исправить ошибка чем совсем никакой