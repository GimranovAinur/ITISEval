'237773 |@words введение хабра много раз затрагиваться тема owin:13 однако:2 сей пора дело всплывать вопрос реализация:6 приложение:8 компонент:5 помощь:3 дать:3 публикация:2 начать:2 стандартный:3 шаблон:4 visual studio 2013 продемонстрировать:2 архитектура также:3 показать как:4 использовать:4 один:4 di-контейнер:3 для:12 mvc:7 так webapi:13 рамка проект конфигурирование:3 vs2013 конфигурация:4 выполняться global asax перенести:2 класс:14 startup теперь:4 зарегистрировать:6 модуль:3 это:8 мы:5 необходимый:10 установить:4 соответствующий nuget пакет:6 открывать package manager console вводить install-package:6 microsoft:6 aspnet:11 после:2 установка мочь:2 middleware:2 var:6 apiconfig:6 configurewebapi configuredependencyinjection:3 app:11 usewebapi метод:6 поговорить далее:2 контейнер:6 пример:2 autofac:5 уже:2 располагать dependencyresolver:4 расширение интеграция:3 mvc5:2 webapi2 поставить ещё поскольку хотеть использование:2 единый:2 инициализация:2 быть расположить:2 конфигурационный private:2 void:2 iappbuilder:2 httpconfiguration builder:11 new:3 containerbuilder:3 assembly:2 executingassembly:3 getexecutingassembly registerapicontrollers registercontrollers registercomponents:2 container:4 build useautofacmiddleware apiresolver:2 autofacwebapidependencyresolver useautofacwebapi mvcresolver:2 autofacdependencyresolver setresolver useautofacmvc:2 код:3 весь:2 очень просто сначала создавать:2 регистрировать:3 немой наш:3 контроллер затем сервис устанавливать он:2 здесь:2 обратить:2 внимание:2 строчка вызов:2 позволять:2 расширить lifetimescope объект:2 чтобы:2 они:2 задействовалиться безопасность:3 identityрегистрирование identity:8 если:2 пустой следующий entityframework:2 четыре usermanager:6 applicationuser:8 signinmanager:5 string:3 iuserstore:4 iauthenticationmanager:5 регистрация:4 нет никакой проблема:2 привести ниже:2 registertype:3 applicationdbcontext:3 dbcontext instanceperrequest:4 applicationsigninmanager:4 userstore стоить заметить что:2 качество:3 библиотека:2 поэтому:2 присутствовать имплементация интерфейс иметь открытый конструктор:4 задавать factory:3 method:3 register:2 resolve iowincontext:2 authentication:3 свойство:2 фактически являться метод-фабрика предоставлять новый authenticationmanager:3 при каждый представлять особый интерес определить create:5 который:2 отвечать:2 создание:2 держать вместе случай столкнуться небольшой принимать identityfactoryoptions:2 аргумент создать сам счастие существовать getdataprotectionprovider:2 неймспейс security dataprotection dataprotectionprovider:2 buildusermanager бизнес логика:2 можно:2 посмотреть accountcontroller увидеть там такой:2 строка:3 httpcontext:3 getowincontext:3 get getusermanager applicationusermanager:3 этот разрешаться соответственно подход предлагаться подходить несколько причина самый очевидный servicelocator контролировать зависимость внутри появление два напрямую зависеть удалить:3 добавить полый через без параметр аналогичный образ исправимый managecontroller убирать owincontext createperowincontext:3 лишний iis uninstall-package:2 webhost заключение узнать реализовать:2 модульный структура asp:2 net:2 dependency injection полный доступный ссылка github