'242999 |@words при:7 работа:2 над один:5 проект:2 возникнуть необходимость написать некий подобие тестовый система:2 задача формулироваться примерно:7 так:3 запись:10 база:2 необходимый выбрать:4 3-5:2 случайный:5 строка:9 серия:3 выборка:12 преимущественно k=2 теперь:2 самый:2 человеческий язык таблица:10 нужно:5 два:3 раз:5 это:13 должный:2 быть:14 дубликат:2 происходить образ:2 первое:2 что:7 приходить голова select:21 from:22 data:4 set:2 where:18 not:10 1,2,3,4:2 order:5 random:17 limit:16 даже:3 работать вот:5 только:2 цена такой:5 решение:6 поэтому:3 прийтись:3 воспользоваться высокий разум который:3 выдать намёк with:6 recursive:4 min:33 max:25 table1:8 array:5 _integer:5 union:5 all:9 and:17 слегка:2 непонятный:2 тащить как-то неохота решить:2 пойти уже проверить путём где удаться найти:2 пояснение сущность рекурсивный:3 запрос:15 логика общий черта стать более-менее понятный выбирать смещение:3 минимальный значение:11 primary:2 key:2 затрагивать максимум вместо полный перебор содержимое гладко бумага попытка:2 использование:2 как:6 есть поправка имя:2 полый:2 всплыть сюрприз массив:3 создаваться пустой:2 из-за:2 финальный:2 мочь:3 оказываться скажем строчка:6 4-7 возвращать:3 id==5:2 после:4 отрабатывать блок 9-15 какой-то:2 этап:2 поскольку:2 предыдущий:2 попасть проверка пройти успешно количество:6 выход:4 более чем указать:4 страница маленький:2 запросто если:2 оный гарантировать:3 иногда возвращаться особенность справиться оказаться сравнительно легко достаточно чуть поменять инициализация пункт заставить пораскинуть мозги подвох обнаружиться сердце алгоритм диапазон:3 действительно пытаться для:6 выполняться условие:8 случай:4 когда трансформироваться естественно ничто прекратить ежели случиться проход пусто заведомо присутствовать нужный побуждение изменить привести он вид:2 сказать позволить получать минимум вовсе получение задать результат:4 думать далёкий длительный размышление:2 множество литр стимулятор появиться свет вариант:2 код:4 запросаwith desc:3 offset:3 _int:6 table:12 весь:4 соль 5-11 даба элемент исходить плохой возможный сценарий дать:2 подряд вернуть следовательно знать иметь:2 n-1:2 перед достигнуть отсортировать порядок:2 убывание произвести:2 вниз использоваться можно:2 единица хорошо основной затруднение остаться мелочь текущий мало полезный ведь делать учёт некоторый:2 простейшее исключать:2 кроме тот:2 нельзя возможность дополнительный налагать active:11 true:2 deleted=false становиться понятно:2 ставить существенный часть практически подзапрос следующий шаблон шаблонаwith exclude:5 fields:2 тут фигурный скобка именовать параметр подлежащее замена название primarykey-поль список:2 набор исключение например наконец последний важность вопрос стоить:2 овчинка выделка каков профит этот мозголомный конструкция проверять начало создать проводиться эксперимент drop exists:2 ttbl:10 create serial null:2 bool default constraint pkey oids=false наполнить чтобы идти последовательно дырка хотя-бы набросать простенький скриптик скриптаimport import psycopg2 'ttbl' name 'id' databases 'name 'test 'user:2 test 'password q9jw zekwohbx+ep_3 xgkqn3 'host 'localhost 'port total:2 10000000 current:5 step:2 10000 dev:2 while for range current+step add int cur:2 execute:2 insert into values items format table=db items= join map str print 'commit видно:2 каждый:3 вставлять сотня меняться:2 шагом отклоняться величина 0-dev последовательный:2 340:2 350 вставить любой 340-348 350-358 342 347 351 355 358 итого:2 оказалосьselect count 1001000 довольно приличный попробовать сделать одиночный показатель запуск:2 определённость тип свести посчитать средний:3 сначала простой запросselect время:5 697 605 624 593 611 выполнение:2 около:3 600ms сейчас монстр смотреть монстраwith 15ms разница полтора 40-50 оно таки проверяться холодное старт перезапуск машина демон хотя абсолютный выражение соотношение оставаться постоянный насколько возможно всегда несколько десяток быстрый лоб примечание точный роль играть отклонение вызвать кеш postgres-а влияние операционный железо остальной софт