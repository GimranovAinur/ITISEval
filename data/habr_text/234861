'234861 |@words при:7 разработка:2 большинство сервис:3 возникать:2 потребность:2 внутренний биллинга:2 для:11 аккаунт так:5 наш:3 возникнуть такой:2 задача:3 готовый:3 пакет:4 решение смочь найти:2 итог прийтись:4 разрабатывать система:9 нуль статья:2 хотеть рассказать:2 опыт подводный камень который:4 столкнуться:2 время:5 задачизадача мы:4 предстоять решить:3 быть:7 типичный люба денежный учёт приём:4 платёж:8 лог транзакция:7 оплата:5 повторяться:6 подписка транзакцииосн единица очевидно выбрать написать:4 следующий:3 простой:2 модель:7 class:2 userbalancechange:4 models:9 model:2 user:12 foreignkey:3 'user:2 related:4 name='balance:2 changes:3 reason:4 integerfield choices=reason choices default=no amount decimalfield 'amount default=0 max digits=18 decimal places=6 datetime:3 datetimefield:2 'date:2 default=timezone:2 now:6 состоять ссылка пользователь:11 причина:2 пополнение или списание:3 сумма:6 совершение операция:5 балансбаланс очень:3 легко посчитать помощь:2 функция:2 annotate:3 orm django:2 считать значение один:4 столбец тем что:4 большой:2 количество дать:3 сильно нагружать поэтому:3 денормализовать добавить:3 пол:7 balance:6 данный:2 обновляться метод save:5 уверенность актуальность немой каждый:5 ночь он:2 пересчитывать правильный конечно хранить информация текущий баланс:5 кэш например:3 redis инвалидировать изменение платежейдлить самый:2 популярный есть:3 проблема установка настройка:2 как:4 правило достаточно выполнить несколько шаг регистрироваться платёжный получать:2 api ключ устанавливать соответствующий реализовывать:2 форма зачисление средство после:2 реализоваться гибко:2 robokassa:3 использоваться приложение django-robokassa код выглядеть from signals import result received:2 def:2 payment:3 sender kwargs order:4 orderforpayment objects:4 get:3 id=kwargs 'invid id=order success=true try sum:3 float except exception pass else change:4 user=user:2 amount=sum reason=balance reasons аналогия можно:2 подключить любой:2 paypal яндекс кассасписание средствсый чуть сложный:2 перед необходимый:3 проверять какой счёт проведение причём по-честному это:5 делать:2 тот:3 чтобы обслуживать кредит особенно важный:2 когда выполняться:2 users filter in=has clients gt=payment select 'tariff здесь без:2 даный дополнительный:3 проверка списанияразобраться основа переходить интересный час:3 назвать биллинг-период:4 снимать:2 определённый соответствие тарифный:3 план:3 реализация механизм использовать:2 celery:3 task логика:2 момент получиться:2 учитывать много фактор между:2 выполнение никогда пройти ровно пополнять свой:2 становиться доступ услуга:2 период нечестно мочь:2 поменять тариф:2 какой-либо перестать выполнять пытаться реализовать:3 алгоритм введение поль красиво удобно last:7 hourly:7 billing:7 где указывать последний:3 работа смотреть списывать:2 согласно затем обновлять:3 смена прошлое активация charge:2 tariff:2 hour:3 rate:6 second:3 total seconds create reason=userbalancechange amount=-hour сожаление являться:2 гибкий если:2 ещё тип добавлять новое скорее всего процесс:2 рефакторинг примерно userbalancesubscriptionlast subscription 'subscription name='subscription этот позволить dashboardм django-admin-tools удобный dashboard:2 панель администрирование следить:2 два:2 показатель:3 график месяц приближаться кто уже:2 платить род рост traction стартап возвращаемость retention метрика стать желать весь удачный биллинга-система получение больший написание django-account-balances думать обратить внимание лояльность