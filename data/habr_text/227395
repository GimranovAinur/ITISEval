'227395 |@words этот:6 статья рассмотреть только конфигурация:8 mongodb:13 затрагивать вопрос подключение репозиторий монг установка пакет:3 система:4 распределенный:4 кластер:7 состоять следующий:6 компонент шард:15 это:7 инстанс mongod:32 который:9 хранить:3 часть дать:5 шардировать:2 коллекция для:18 использование production:2 каждый:2 должный:5 быть:8 набор:9 реплика:8 replicaset сервер:16 так:3 экземпляр:5 метаданные:2 указывать какой:2 храниться маршрутизация:5 mongos:22 он:8 задача запрос приложение:2 ниже привести:2 схема работа шардированный удобный всего необходимый:3 роль:2 группировать образ допустить:2 создание иметь mongos01:3 mongos02 mongos03 настройка:5 тот:2 что:9 работать как:4 приводить etc:23 conf:18 вид:2 logpath= var:11 log:4 logappend=true fork=true dbpath=:3 opt:4 mongocfg pidfilepath=:3 run:5 pid:17 bind:2 ip=:2 eth:2 configsvr=false после запускать:5 сервис:4 service:4 startнастройка прежде чем переходить убедиться:2 установленный:2 mongodb-org-mongos rpm -qa grep mongodb-org-mongos-2 2-1 x86 начало создать:6 файл:4 configdb=mongos01_27019 mongos02_27019 mongos03_27019 mongo:28 config:8 servers addresses port 27017 logpath logappend true:5 fork verbose:2 false:3 включить свой init:11 script:7 посему егоcat theend:4 bin:8 bash:2 startup:2 for:8 chkconfig:4 description:2 router process sharding processname:2 pidfile:4 functions:2 will read configuration settings add:2 variable support multiple instances the:9 instance:8 name:3 default:2 this:8 way another can:4 created just:2 copying and:3 creating file:13 with same extension example mongos2:3 optionally also create:2 sysconfig:10 override env variables below instance= basename options:6 points overriden:2 options=:2 path= file=:2 path:5 bin= usr:3 user=mongod:2 group=mongod:2 ulimit=12000 lock:8 subsys:4 source that:4 above values:2 sysconfig=:2 then:4 pids does not exist mkdir:2 chown:2 user:5 group start:11 echo:10 starting:2 daemon:2 retval=:6 retval:9 -eq:5 touch:2 return:2 stop:8 stopping:2 killproc:2 -t30 -term restart:6 ulimit:10 retval=0:2 case:2 restart_reload_force-reload:2 condrestart:2 status:6 usage:2 start_stop_status_restart_reload_force-reload_condrestart:2 retval=1:2 esac:2 exit:2 сделать:3 исполняемымchmod теперь:5 можно:2 забыть нужно:2 повторить действие остальной первое:3 помнить:3 при среда replica set более подробно:3 про:3 репликация прочесть официальный:2 документация:2 останавливаться приступить мы master:4 mongo01-rs01:2 slave:2 mongo02-rs01:3 два:5 mongo01-rs02:2 mongo02-rs02:2 весь:2 четыре уже установить задать имя использовать:2 шардreplset=rs01 сохранять:2 далее:4 заходить:2 консоль:3 планировать инициализировать:2 initiate посмотреть конфигrs01:3 primary:7 вывод:3 показать что-то подобный rs01:11 version:3 members:3 host:10 mongo01-rs01_27017:6 добавлять:2 наш:8 наборrs01 проверять:4 mongo02-rs01_27017:5 повышение отказоустойчивость рекомендоваться количество машина:2 делать:2 чётный хотеть создавать ещё один:2 копия мочь:2 арбитраарбитр являться:2 член никакой участвовать выбор:2 новое мастер устроить очень написать чтобы выделять под:2 отдельный воспользоваться ранее там запускаться арбитр:2 рука scriptcat mongo-rs01-arb:6 scalable document-oriented database things from get:2 there reading note you:4 change any here what pay assumes all are configfile= mongod-rs01-arb:7 configfile:3 fixme has shutdown flag parses shuts down correct running but unavailable now away when stops supporting awk:2 -f=:2 ^dbpath blank:4 print:4 pidfile= ^pidfilepath mongod= mongod- handle numa access cpus server-3574 verifies existence numactl:8 well testing command works args= interleave=all which dev:5 null:5 args:2 numactl=:2 else recommended see http docs org manual reference recommended-settings unlimited:4 64000 32000 300 исполняемый chmod+x basedir -av редактировать строкиport=27020 удалять комментировать строкуconfigsvr=true возвращаться addarb mongos01_27020:2 arbiteronly повторять процедура остаться второе надо добавить:3 идти следовать случай:2 подключаться addshard:2 rs02:7 mongo01-rs02_27017:3 mongo02-rs02_27017:3 содержимый:2 строка shards:2 означать успешно база:2 файловый gridfs:2 use:2 filestore:5 enablesharding shardcollection chunks:4 files:2 статус примерно такой databases admin partitioned:3 test shard key 1363 103 too many want force вот обращаться ошибка точность просьба писать личка