'243035 |@words несмотря кажущийся простота вопрос прийтись достаточно долго нудный собирать информация:3 крупица дать:2 публикация:2 хотеть:2 поделиться накопить опыт итак mac:19 notification:8 snmp:37 уведомление:3 который:2 быть:3 передавать:3 сервер:9 mac-адрес:2 устройство:7 порту коммутатор:2 при:2 включение:2 или:2 отключение:2 это:3 весьма удобный штука расширять возможность мониторинг сеть через приступить настройка:7 занять много время:2 режим:3 конфигурация:2 добавление:2 новый:2 группа:3 snmp-server:3 community имя:3 enable:55 traps:28 mac-notification:8 change:7 move threshold показывать куда отправлять трап:10 host:14 ip-адрес:2 таблица:2 address-table:3 interval:11 history-size 100 выбирать нужный:3 порт:4 включать отправление int:3 range fa0 1-24 trap:46 added removed:2 проверить:2 правильность можно:2 дебаг:2 debug:8 packets ter mon если весь:5 настроить:2 верно увидеть что-то вроде nov:3 16_28_51:3 685:2 queuing packet:2 xxx:8 ent:2 cmnmibnotificationprefix addr gentrap spectrap cmnhistmacchangedmsg:5 cmnhisttimestamp 113588548 937 sent:3 via:6 udp:3 рассмотреть дробный объект:3 шестнадцатеричный строка:4 октет:5 последний два:2 нуль:2 всегда:2 конец:2 запись:3 один:5 состояние добавлено,02 отключить следующий:3 номер:2 vlan' занимать мак-адрес:2 наш случай:3 хххха:3 обратить внимание:2 cогласно документация мочь:2 несколько:3 идти подряд без какой либо разделение сообщение:2 так дописываться пара состоять этап перед настоятельно рекомендовать доходить пакет команда:2 tcpdump udp_grep адрес:2 свича установка:3 стандартный mib:9 sudo apt-get install snmpd:4 snmptt:85 snmp-mibs-downloader mib-файл умолчание:2 знать cisco:4 чтобы смочь распознать подобный необходимый скачать:2 файл:4 ftp:2 положить var:14 lib:2 mibs:5 должный cisco-mac-notification-mib:4 cisco-qos-pib-mib cisco-smi cisco-tc cisco-vtp-mib успешный snmptranslate 215:2 ответить _ciscomacnotificationmib etc:9 default:14 snmpdrun=yes snmpdopts='-lsd -lf dev null:8 -smux mtetrigger mtetriggerconf run:6 pid' trapdrun=yes trapdopts='-on -lsd snmptrapd:7 pid:4 conf:25 перенаправлять:2 демон:2 traphandle разрешить disableauthorization yes поиск oid:26 event:4 _cmnmacchangednotification status:5 events normal format:32 перенаправление скрипт:3 параметр:2 aa-ip кот находиться статус vlan:5 интерфейс передать:2 exec:16 php:6 opt:2 script:2 sdesc edesc ini:3 configuration:4 file:41 linux:3 unix general name:18 this:45 system:16 for:69 variable:17 blank:9 will:35 the:213 computer's hostname:4 sys:3 _hostname set:92 either:2 'standalone 'daemon' standalone:3 called from:17 daemon:8 calls snmptthandler:4 ignored:2 windows:6 see:17 documentation:3 mode:9 allow:11 multiple:3 definitions:2 executed:5 same have:21 stop after:6 first:2 match:2 option:5 should:16 normally:5 section:3 'snmptt notes more:6 information note:25 wildcard:4 matches:4 are:19 only:10 matched there:4 exact:2 takes into:2 consideration nodes:11 list:12 therefore matching but:5 prevents being:4 considered:3 entry:3 used:18 other:4 passes address:7 device:3 sending and:41 actual agent:3 these addresses:4 could:4 differ was:3 behalf another:2 relay proxy dns:7 enabled:22 converted using:5 lookup which:5 includes local hosts depending:3 how:12 configured:2 field:3 logged:4 database:33 names:10 line:9 resolved:2 then:4 comparing disable:30 resolution:2 use:40 fqdn:2 fully qualified domain:14 passed:6 that:16 contains:3 not:27 altered any:10 way also:6 affects resolve:2 value:23 strip:7 example:15 server01:4 com:4 would:4 changed:4 based:2 domains:2 stripped when:15 can:9 contain:5 one:8 city:2 'host:3 end:23 configures:6 contained:3 bindings:2 handled:3 applies:2 values:16 resolving:2 net:11 perl:19 must:17 settings:2 influence module:14 ucd-snmp:6 net-snmp:13 package:2 required substitution:6 work some:2 options:4 enabling:5 with:9 stand-alone cause:2 very slowly due:2 loading startup caching:2 enum translations:2 result:4 faster restart updating files:20 otherwise cache:2 may:6 inaccurate data:2 defaults:12 sets best:2 guess:2 parameter translating:2 symbolic:10 nams oids:6 vice versa previous:2 versions patch:2 722075:2 applied equivalent -ir command:5 utilities able translate:20 certain formats such:9 rfc1213-mib _sysdescr all:17 possibilities translated:2 faq readme info:5 received:5 outputting log:41 does apply numerical:2 short:4 text:14 form:3 linkup:3 if-mib:2 _linkup long:5 iso:2 snmptraps:2 _iso:2 -the output:7 vary version you:16 -net -if logging:20 ensure:8 trapoid column:7 large:2 enough hold entire substitutions include:2 affected buildingalarm:3 ups-mib:3 _buildingalarm:2 upsalarm:2 ups:2 alarm:2 534 has:9 cleared:2 enterprise:6 displayed:3 1,2,3:3 varname converting:2 integer:2 enumeration:2 tags:2 defined:11 moverdoorstate open instead moverdoorstate_2 integers allows:3 environment:2 leave:8 comment out:2 systems:5 enviroment processed:6 manual page what:2 separate variables:3 wildcards expanded space:2 within quotes:3 characters:2 expansion separator unsafe:6 regex:4 code:4 prevent:2 interopolation modifier statements:3 captures two:4 three:2 five:4 six:4 outputs:2 length because contents regular expression right eval sure:3 secure backslash:2 escape:3 just remove:3 loaded:4 each:3 time:23 lists setting:5 uses:2 modified while running:4 many reads number:5 dynamic description:6 nothing outputted descriptions:2 stored:2 greatly:2 increase:3 amount:3 memory:5 enables save usage white start clean warning:10 experimental:2 recommended:3 production:2 environments:2 threads:8 quit:3 unexpectedly:2 ithreads:2 higher:2 launch thread continue:2 processing:2 max:2 maximum execute:4 once date:13 strftime:3 standard:5 unknown:39 localtime:3 sql:23 daemonmode fork:2 background user:5 500 textual read:3 write access:2 spool:5 folder starting root:2 second child:3 process:5 started uid:2 processes ran waiting quits parent exit complete:5 path:5 store directory:2 n't forget trailing slash seconds:6 sleep:2 between:2 off:2 'sleep' erase:3 spooled:3 attempts even did successfully:3 logs:2 least fails continuously until function keep unlogged often:5 duplicate:3 md5:2 hash incoming check duplicates except uptime calculating larger require most cases good:2 idea sometimes negative effect:7 trying troubleshoot wireless keeps losing connection:13 want:3 associations disassociations minutes:12 300:7 600 900:4 window messages:4 disabled:4 unless:3 piping program stdout:3 make:2 specify:2 location:8 filename:4 log':3 tmp:4 errors:4 snmpttsystem:2 left:3 grow quickly primarily troubleshooting executing incorrect simply missing table:28 both:2 define snmpttunknown:2 statistics:17 syslog:22 hour 216000 hours:2 2592000 5184000 _syslog:2 users:2 facility:4 'local0':2 local0:2 level:14 severity:2 per lines case sensitive critical definition notice:3 err:3 crit:3 alert:3 valid:8 emerg:2 'warning' determines numeric:2 determine custom:5 below:2 binding count uptime2 been columns:3 mysql:30 dbi:27 requires:3 dbd:27 _mysql:2 server:7 optional:4 localhost:4 port:6 3306:2 stat:5 username:6 snmpttuser:2 password:9 whether:3 'ping:3 before:3 attempting:3 insert:9 still:6 error:6 generate:6 ping:18 'unable:6 connect:6 attempt:6 re-create:6 'pinged:3 pinging:3 1800:3 postgresql:31 _pgpp:2 _pg network:2 support:2 connections tcpip:2 socket true pgdata adding pgdatapg hba common config rpm installations pgsql hostport 5432:2 postgresqll odbc:22 _odbc:2 dsn dbc traptime follow:2 supported:2 datetime:3 temporarily:2 commands:3 preexec:3 pre following:2 similar:2 without:2 newlines described:2 wildards shell expanding debugging:10 basic forking handler:2 trapfiles conf' такой образ слушать 162 обрабатывать запускать исполнение php-скрипт конфига включить поэтому входящая записываться собственно сам обработка полагать что уже установленный usr bin массив argv:5 содержимый:2 переменный командный запустить аргумент-ip второй-mac-notification ip= msg:3 i=2 =count i++ разделить отдельный str split msg,22 подключение структура create:3 exists auto increment varchar:4 250:2 interface:4 primary key engine=innodb charset=utf32 array:3 'localhost 'username' 'username:2 'password' 'password:2 'db:2 name' 'mac' dbconnection new pdo:5 'mysql host= dbname= attr init utf8 dbconnection-:3 setattribute:2 _attr:2 emulate prepares false errmode _errmode exception foreach парсинга каждый status=substr value,0,2 vlan=hexdec substr:6 value,2,4 mac=substr value,6,12 strtolower replace:2 mac,4,8 mac,8,12 interface=hexdec value,20,2 stmt prepare 'insert now stmt- status'= mac'= interface'= ip'= vlan'= статья всего лишь конкретный пример широкий применение найти ещё большой интересный функция надеяться мой помочь вы сэкономить